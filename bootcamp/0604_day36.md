## 0604_Day36

## 1. `react-router-dom` 패키지의 주요 컴포넌트

- 공부 계기

  - 내가 맡은 CommunityMain(커뮤니티 메인 페이지) 컴포넌트를 만들다가 “더보기”를 누르면 관련 페이지로 이동하도록 하기 위해 `<Link>` 태그를 사용했는데, 에러가 났다.
  - 에러 메시지를 확인해 보니, Router 설정(경로 설정)을 하지 않고 `<Link>` 태그를 사용해서 에러가 나는 것 같았다.
  - 에러 원인을 찾다가, React Router에서 `<Link>` 태그를 사용하기 위해서는 `<BrowserRouter>` 또는 `<Router>` 컴포넌트로 애플리케이션을 감싸야 한다는 사실을 알게 되었다.
  - 그냥 강의에서 배운대로만 라우팅 기능을 사용하고 있었는데, 각 컴포넌트가 어떤 역할을 하는지 알아야 나중에 더 큰 프로젝트에서 혼동하지 않고 라우터 설정을 잘 할 수 있을 것 같아서 `react-router-dom` 패키지의 주요 컴포넌트에 대해서 정리해보기로 했다.

- **`react-router-dom`**

  - 리액트 애플리케이션에서 **라우팅을 관리하기 위한 패키지**이다.
  - 이를 통해 사용자는 URL을 통해 다른 페이지로 이동할 수 있다.

- `react-router-dom`의 주요 컴포넌트

  ### 1. `BrowserRouter`

  - 주요 기능 및 역할
    - **라우팅 관리**
      - 애플리케이션의 **최상위 라우터 컴포넌트**로 사용된다.
      - 이를 통해 애플리케이션 내의 모든 라우팅을 관리한다.
      - **URL이 변경될 때마다 해당 경로에 맞는 컴포넌트를 렌더링**한다.
    - **히스토리 관리**
      - HTML5의 히스토리 API를 사용하여 **브라우저의 주소를 제어**한다.
      - 이를 통해 사용자는 뒤로 가기, 앞으로 가기와 같은 브라우저 내비게이션을 사용할 수 있다.
      - `push`와 `replace` 메서드를 통해 프로그램적으로 히스토리를 제어할 수 있다.
    - **경로 매칭 및 렌더링**
      - 자식 컴포넌트로 전달된 `Routes` 및 `Route` 컴포넌트를 사용하여 **현재 경로와 일치하는 컴포넌트를 렌더링**한다.
      - 경로가 변경될 때마다 새로운 경로에 맞는 컴포넌트를 찾아서 렌더링한다.
    - **전체 페이지 리로드 없이 URL 변경**
      - **SPA(Single Page Application)** 방식으로 작동하여 **전체 페이지를 다시 로드하지 않고도 URL을 변경**할 수 있다.
      - 이를 통해 사용자 경험을 향상시킨다.
  - 사용 예

    - `BrowserRouter`는 보통 애플리케이션의 최상위 레벨에서 사용되며, 내부에 `Routes`와 `Route` 컴포넌트를 포함하여 각 경로에 맞는 컴포넌트를 정의한다.

      ```jsx
      import React from "react";
      import { BrowserRouter, Routes, Route } from "react-router-dom";
      import HomePage from "./HomePage";
      import AboutPage from "./AboutPage";
      import ContactPage from "./ContactPage";

      const App = () => {
        return (
          <BrowserRouter>
            <Routes>
              <Route path="/" element={<HomePage />} />
              <Route path="/about" element={<AboutPage />} />
              <Route path="/contact" element={<ContactPage />} />
            </Routes>
          </BrowserRouter>
        );
      };

      export default App;
      ```

  - 히스토리 객체의 사용

    - `BrowserRouter`는 내부적으로 **히스토리 객체를 생성하고 관리**한다. 이를 통해 **URL을 제어**하고, **경로 변경 시 애플리케이션 상태를 관리**할 수 있다.
    - `push` : 새로운 경로로 이동하며, **히스토리 스택에 새로운 엔트리를 추가**한다.
      ```jsx
      const navigate = useNavigate();
      navigate("/about");
      ```
    - `replace` : 현재 경로를 새로운 경로로 대체하며, **히스토리 스택의 현재 엔트리를 교체**한다.

      ```jsx
      const navigate = useNavigate();
      navigate("/about", { replace: true });
      ```

      - **replace 옵션을 사용하지 않으면 기본적으로 새로운 엔트리가 추가된다.**
      - 사용자가 현재 "/home" 페이지에 있다고 가정하고 위 코드를 호출하면, 브라우저의 URL이 "/about"으로 변경된다.
      - 히스토리 스택에서는 "/home" 엔트리가 "/about" 엔트리로 대체된다.
      - 따라서 사용자가 브라우저의 뒤로 가기 버튼을 눌러도 "/home"으로 돌아갈 수 없다.
      - 실전 사용 예시

        ```jsx
        import React, { useEffect } from "react";
        import { useNavigate } from "react-router-dom";

        const ProtectedPage = () => {
          const navigate = useNavigate();
          const isAuthenticated = false; // 이 값은 실제 인증 상태에 따라 달라짐

          useEffect(() => {
            if (!isAuthenticated) navigate("/login", { replace: true });
          }, [isAuthenticated, naviagate]);

          return (
            <div>
              <h1>Protected Page</h1>
              <p>
                여기는 보호된 페이지입니다. 인증된 사용자만 접근할 수 있습니다.
              </p>
            </div>
          );
        };

        export default ProtectedPage;
        ```

        - 이 코드는 사용자가 인증되지 않은 상태이면 "/login" 페이지로 리디렉션되며, 히스토리 스택의 현재 엔트리가 "/login"으로 대체된다.
        - 이 경우 사용자는 뒤로 가기 버튼을 눌러도 보호된 페이지로 다시 돌아갈 수 없다.
        - 위 예시는 특정 조건에서 사용자에게 다른 페이지로 리디렉션할 때 유용하다.
        - 예를 들어, **사용자가 인증되지 않은 상태로 보호된 페이지에 접근할 때 로그인 페이지로 리디렉션할 수 있다.**

  - 라우터의 구성 요소
    - `BrowserRouter`는 라우터와 관련된 여러 가지 구성 요소와 함께 작동한다. 주요 구성 요소는 다음과 같다.
      - **`Routes`** : 여러 `Route`를 감싸며, URL과 일치하는 첫 번째 `Route`를 렌더링한다.
      - **`Route`** : 경로와 일치하는 컴포넌트를 정의한다. `path`와 `element` 속성을 사용하여 특정 경로에 렌더링할 컴포넌트를 지정한다.
      - **`Link`** : 페이지 간 네비게이션을 제공하는 컴포넌트로, 클릭 시 URL을 변경한다.

  ### 2. `Routes`

  - 주요 기능 및 역할
    - **라우팅 관리**
      - 여러 개의 `Route` 컴포넌트를 자식으로 가질 수 있으며, **현재 URL과 일치하는 첫 번째 `Route` 컴포넌트를 렌더링**한다.
      - 각 `Route`는 특정 경로와 일치하는 경우 렌더링할 컴포넌트를 정의한다.
    - **라우트 매칭**
      - URL과 `Route` 컴포넌트의 `path` 속성을 비교하여 일치하는 경로를 찾는다. 이때, 가장 먼저 일치하는 경로를 렌더링한다.
      - 중첩된 경로를 지원하여, **중첩된 `Route` 컴포넌트를 정의**하고 사용자가 **깊이 있는 네비게이션**을 할 수 있도록 한다.
  - `Route` 컴포넌트와 함께 사용
    - `Routes` 컴포넌트 내에 여러 `Route` 컴포넌트를 정의하여 다양한 경로에 맞는 컴포넌트를 렌더링한다.
      - **`path` 속성** : **경로**를 정의한다. 경로는 **절대 경로와 상대 경로**를 모두 사용할 수 있다.
      - **`element` 속성** : **경로와 일치할 때 렌더링할 컴포넌트**를 지정한다.
  - 중첩된 라우팅
    - `Routes`와 `Route`를 사용하면 중첩된 라우트를 쉽게

## 2. `react-router-dom` 패키지의 주요 훅

- 공부 계기
  - `react-router-dom` 패키지의 주요 컴포넌트를 공부하는 참에, 주요 훅들도 다시 정리해보기로 했다.

## 3. 페이지 상단으로 이동
